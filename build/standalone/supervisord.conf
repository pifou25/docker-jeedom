[supervisord]
; supervisor daemon configuration
; http://supervisord.org/configuration.html#supervisord-section-settings
; /proc/1/fd/1 redirect log to the process 1 and File Descriptor 1 (i.e. stdout)
logfile = /proc/1/fd/1  ; /var/www/html/log/supervisor.log
logfile_maxbytes = 0 ; 50MB
logfile_backups = 0
loglevel = info
pidfile=/var/run/supervisord.pid
nodaemon = true
minfds = 1024
minprocs = 200
umask = 022
user = root
identifier = supervisor
directory = /tmp
nocleanup = true
childlogdir = /tmp
strip_ansi = false

[unix_http_server]
; required section for apache HTTP server
; http://supervisord.org/configuration.html#unix-http-server-section-settings
file=/var/run/supervisor.sock
chmod=0700

[rpcinterface:supervisor]
; add some custom behavior
; http://supervisord.org/configuration.html#rpcinterface-x-section-settings
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
; http://supervisord.org/configuration.html#supervisorctl-section-settings
serverurl = unix:///var/run/supervisor.sock ; use a unix:// URL  for a unix socket

[include]
; usefull to include more configuration files
; http://supervisord.org/configuration.html#include-section-settings
; files = /etc/supervisor/conf.d/*.conf

; every 'program' sections have similar parameters
; http://supervisord.org/configuration.html#program-x-section-settings
[program:cron]
command=/usr/sbin/cron -f
autostart=true
startsecs=10
autorestart=false
stderr_logfile=/var/www/html/log/cron.err.log
stdout_logfile=/var/www/html/log/cron.out.log

[program:apache2]
command=/usr/sbin/apache2ctl -DFOREGROUND -k start
user=www-data
autostart=false
startsecs=5
autorestart=true
killasgroup=true
stopasgroup=true
stderr_logfile=/var/www/html/log/apache2.err.log
stdout_logfile=/var/www/html/log/apache2.out.log

[program:mysql]
command=mysqld_safe
user=www-data
autostart=true
autorestart = true
startsecs=5
killasgroup=true
stopasgroup=true
stderr_logfile=/var/www/html/log/mysql.err.log
stdout_logfile=/var/www/html/log/mysql.out.log

[program:fail2ban]
command = /usr/bin/python3 /usr/bin/fail2ban-server  -fc /etc/fail2ban/
user = root
autostart = true
autorestart = true
stdout_logfile = /var/www/html/log/fail2ban.out.log
stderr_logfile = /var/www/html/log/fail2ban.err.log

[program:atd]
command=/usr/sbin/atd -f
autostart = true
autorestart = true
startsecs=10
stdout_logfile = /var/www/html/log/atd.out.log
stderr_logfile = /var/www/html/log/atd.err.log

[program:init]
command = /root/init.sh
user = root
autostart = true
autorestart = false
stdout_logfile = /var/www/html/log/init.out.log
stderr_logfile = /var/www/html/log/init.err.log

# [program:rsyslogd]
# command = rsyslogd -n

# [program:sshd]
# command=/usr/sbin/sshd -D 
